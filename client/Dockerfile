FROM node:gallium

WORKDIR /usr/app

COPY package*.json ./

RUN npm ci -qy

COPY . .

ARG REACT_APP_API_BASE_URL
ARG WDS_SOCKET_HOST
ARG WDS_SOCKET_PORT

ENV REACT_APP_API_BASE_URL=$REACT_APP_API_BASE_URL
ENV WDS_SOCKET_HOST=$WDS_SOCKET_HOST
ENV WDS_SOCKET_PORT=$WDS_SOCKET_PORT

CMD ["npm", "start"]